@model BOOKcheck.Storage.Entity.Book


<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/reset.css">
    <link rel="stylesheet" href="~/css/bookstr.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Login</title>

    @if (Context.Request.Cookies["bookCookie"] != null)
    {  <style> .auth { display: normal; } </style> }
    @if (Context.Request.Cookies["bookCookie"] == null)
    {  <style> .auth { display: none; } </style> }

</head>

<body class="color1">
    <div class="login">
        
        <div class="container">
            <h1 class="mt-5" style="text-align:center">Страница книги</h1>
            <div class="block mt-5" style="height:100%">
                <div class="info" style="height:max-content">
                <nav>
                    <ul>
                        <li style="height: auto;color:black">


                            <img src="~/images/Alice.jpg" height="240" width="145" />
                            <label id="bookName">@Model.Name</label> <label>@Model.Author.Name</label>
                            <p>Рейтинг:</p> <p>Год:</p> <p>Жанр:</p>
                            @if (Context.Request.Cookies["bookCookie"] == null)
                            {
                                <form style="border: 1px solid #000000;margin:auto;margin-bottom: 4px;border-radius: 3px;" action="https://localhost:44384/Authorization">
                                    <a>Чтобы воспользоваться дополнительными фунциями сайта вы можете войти в свою библеотеку <button style="width: 15%; margin-top: 5px; margin-bottom: 3px;margin-left: 10px; border: 3px solid #000000;" type="submit" class="btn btn-primary">Войти</button></a>
                                </form>
                            }

                            <div class="auth">
                                @using (Html.BeginForm("SetUserLibBook", "Book", FormMethod.Post))
                                {
                                    <input name="bookId" id="bookId" style="display:none" type="text" size="4" value="@Model.Id">
                                    <label for="customRange3" class="form-label">Сортировка по:</label>

                                    <select name="libOption" id="libOption" class="form-select" aria-label="Default select example" onchange="getSelect(this)">

                                        <option selected hidden value="0" > Выбор списка </option>

                                        <option id="1" value="1" > Читаю</option>
                                        <option id="2" value="2" >Закончил читать</option>
                                        <option id="3" value="3" >Хочу читать</option>
                                        <option id="4" value="3" >Бросил читать</option>
                                    </select>

                                    <input name="page" id="page" style="width: 15%; margin-top: 3px; display:none" type="number" min="0" size="4" placeholder="Номер страницы">

                                    <input name="rate" id="rate" style="width: 15%; margin-top: 3px; display:none" type="number" min="0" max="10" size="4" placeholder="Рейтинг">

                                    <button style="width: 100%; margin-top:5px" type="submit" class="btn btn-primary">Искать</button>
                                }
                            </div>
                        </li>

                    </ul>
                </nav>
            </div>
            </div>
        </div>
    </div>
</body>
</html>
<script>

    var select = document.querySelector('select');
    var page = document.getElementById("page");
    var rate = document.getElementById("rate");

   function getSelect(select) {
   
        var indexSelected = select.selectedIndex,
            option = select.querySelectorAll('option')[indexSelected];
        var selectedId = option.getAttribute('id');

       if (selectedId == '1') {
            page.style.display = "block";
            rate.style.display = "none";
       }

       if (selectedId == '2') {
           page.style.display = "none";
           rate.style.display = "block";
       }

       if (selectedId == '3') {
           page.style.display = "none";
           rate.style.display = "none";
       }

       if (selectedId == '4') {
           page.style.display = "block";
           rate.style.display = "block";
       }

       page.innerHTML = '';
       rate.innerHTML = '';
    };


</script>